<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fileformat>
<fileformat>

	<xi:include href="../ovl_base/ovl_base.xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="xpointer(*/*)" />

	<struct name="Vector3" size="12" inherit="MemStruct">
		A vector in 3D space (x,y,z).
		<field name="x" type="float">First coordinate.</field>
		<field name="y" type="float">Second coordinate.</field>
		<field name="z" type="float">Third coordinate.</field>
	</struct>

	<struct name="ByteVector3" size="3" inherit="MemStruct">
		A vector in 3D space (x,y,z).
		<field name="x" type="byte">First coordinate.</field>
		<field name="y" type="byte">Second coordinate.</field>
		<field name="z" type="byte">Third coordinate.</field>
	</struct>

	<struct name="ShortVector3" size="6" inherit="MemStruct">
		A vector in 3D space (x,y,z).
		<field name="x" type="short">First coordinate.</field>
		<field name="y" type="short">Second coordinate.</field>
		<field name="z" type="short">Third coordinate.</field>
	</struct>

    <struct name="SplRoot" inherit="MemStruct">
        JWE2: 16 bytes
        <field name="spline_data" type="Pointer" arg="count" template="SplData"/>
        <field name="count" type="ushort" />
        <field name="sixteen" type="ubyte" default="16" />
        <field name="one" type="ubyte" default="1" />
        <field name="length" type="float" >total length of the interpolated curve, cf blender Spline.calc_length()</field>
    </struct>

    <struct name="Key" inherit="MemStruct">
        JWE2: 16 bytes
        <field name="pos" type="ShortVector3" />
        <field name="handle_left" type="ByteVector3" />relative to pos
        <field name="handle_right" type="ByteVector3" />relative to pos
        <field name="handle_scale" type="float" />multiply this with byte vector to get handles
    </struct>

    <struct name="SplData" inherit="MemStruct">
        JWE2: 16 + n*16 bytes
        <field name="offset" type="Vector3" />sometimes blank
        <field name="scale" type="float" />multiply this with short vector to get coord
        <field name="keys" type="Key" arr1="#ARG#" />
    </struct>

</fileformat>
