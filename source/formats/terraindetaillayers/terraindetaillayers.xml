<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fileformat>
<fileformat>

	<xi:include href="../ovl_base/ovl_base.xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="xpointer(*/*)" />

    <struct name="TerrainDetailLayersRoot" inherit="MemStruct">
        # 16 bytes
        <field name="layer_list"  type="ArrayPointer" template="TerrainDetailsLayerItem" arg="layer_count"/>
        <field name="layer_count" type="uint64" />

    </struct>

    <struct name="TerrainDetailsLayerItem" inherit="MemStruct">
        # 88 bytes

        <field name="layer_name"  type="Pointer" template="ZString"/>
        <!-- seems like brushes list or something -->
        <field name="info_list"  type="ArrayPointer" template="InfoStruct" arg="info_count"/>
        <field name="info_count" type="uint" />

        <field name="float1"   type="float" />
        <field name="float2"   type="float" />
        <field name="float3"   type="float" />
        <field name="float4"   type="float" />
        <field name="float5"   type="float" />
        <field name="float6"   type="float" />
        <field name="unk_2"    type="uint" />

        <!-- LOD info -->
        <field name="detail_list" type="ArrayPointer" template="DetailStruct" arg="detail_count"/>
        <field name="detail_count" type="uint" />

        <field name="floata1"   type="float" />
        <field name="floata2"   type="float" />
        <field name="floata3"   type="float" />
        <field name="floata4"   type="float" />
        <field name="floata5"   type="float" />
        <field name="floata6"   type="float" />
        <field name="floata7"   type="float" />
        <field name="floata8"   type="float" />

        <field name="unk_3_flags"         type="uint" />
        <field name="unk_count"    type="uint64" />
        <field name="other_names" type="Pointer" template="ZStringList" arg="other_names_count"/>
        <field name="other_names_count"    type="uint64" />
        <field name="second_name"  type="Pointer" template="ZString"/>

        <field name="floatb1"   type="float" />
        <field name="floatb2"   type="float" />

    </struct>

    <!-- brush list -->
    <struct name="InfoStruct" inherit="MemStruct">
        <field name="brush_list"  type="ArrayPointer" template="brushitemStruct" arg="brush_count"/>
        <field name="brush_count" type="uint" />
        <field name="brush_flags" type="uint" />
        <!-- confirm this is scale or alpha -->
        <field name="Scale"        type="float" />
        <!-- looks like padding -->
        <field name="unk_1"        type="float" />
    </struct>

    <struct name="brushitemStruct" inherit="MemStruct">
        <field name="brush_name"  type="Pointer" template="ZString"/>
        <field name="brush_type"  type="uint64"/>
    </struct>

    <!-- Level Of Detail for the layer -->
    <struct name="DetailStruct" inherit="MemStruct">
        <field name="index"    type="uint" />
        <field name="x"        type="float" />
        <field name="y"        type="float" />
        <field name="z"        type="float" />
    </struct>

</fileformat>
