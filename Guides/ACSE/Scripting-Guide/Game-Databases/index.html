
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://opennaja.github.io/cobra-tools/Guides/ACSE/Scripting-Guide/Game-Databases/">
      
      
        <link rel="prev" href="../Content-Packs/">
      
      
        <link rel="next" href="../Game-Managers/">
      
      
      <link rel="icon" href="../../../../assets/Cobra_Tools_Logo_16px.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Game Databases - Cobra Tools</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Game Databases - Cobra Tools" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://opennaja.github.io/cobra-tools/assets/images/social/Guides/ACSE/Scripting-Guide/Game-Databases.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://opennaja.github.io/cobra-tools/Guides/ACSE/Scripting-Guide/Game-Databases/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Game Databases - Cobra Tools" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://opennaja.github.io/cobra-tools/assets/images/social/Guides/ACSE/Scripting-Guide/Game-Databases.png" >
      
    
    
   <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-the-game-database" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Cobra Tools" class="md-header__button md-logo" aria-label="Cobra Tools" data-md-component="logo">
      
  <img src="../../../../assets/Cobra_Tools_Logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cobra Tools
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Game Databases
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/OpenNaja/cobra-tools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    cobra-tools
  </div>
</a>
      </div>
    
  </nav>
  
    
      <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Navigation tabs -->
<nav
  class="md-tabs"
  aria-label="Tabs"
  data-md-component="tabs"
>
  <div class="md-grid">
    <!-- Adds tab on right side of header -->
    
    <ul class="md-tabs__list" style="float: right;">
      <li class="md-tabs__item">
        <a href="https://discord.gg/Su4jXKk" class="md-tabs__link discord" target="_blank">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>Discord
        </a>
      </li>
      <li class="md-tabs__item">
        <a href="https://trello.com/w/cobratools" class="md-tabs__link trello" target="_blank">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.3 32H56.1C25.1 32 0 57.1 0 88c-.1 0 0-4 0 336 0 30.9 25.1 56 56 56h336.2c30.8-.2 55.7-25.2 55.7-56V88c.1-30.8-24.8-55.8-55.6-56M197 371.3c-.2 14.7-12.1 26.6-26.9 26.6H87.4c-14.8.1-26.9-11.8-27-26.6V117.1c0-14.8 12-26.9 26.9-26.9h82.9c14.8 0 26.9 12 26.9 26.9v254.2zm193.1-112c0 14.8-12 26.9-26.9 26.9h-81c-14.8 0-26.9-12-26.9-26.9V117.2c0-14.8 12-26.9 26.8-26.9h81.1c14.8 0 26.9 12 26.9 26.9z"/></svg>Trello
        </a>
      </li>
      <li class="md-tabs__item">
        <a href="/cobra-tools/Download" class="md-tabs__link download">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg>Download
        </a>
      </li>
    </ul>
    
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../.." class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../blog/" class="md-tabs__link">
        
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Development/" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 19V7H4v12zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-7 14v-2h5v2zm-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59z"/></svg>
    
  
  Development

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 20h7v2H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8.54l-1.5-.82-.5.28V4h-5v8l-2.5-2.25L8 12V4H6zm18-3-5.5-3-5.5 3 5.5 3zm-9 2.09v2L18.5 23l3.5-1.91v-2L18.5 21z"/></svg>
    
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Modding-FAQ/" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 15H6l-4 4V3a1 1 0 0 1 1-1h15a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1m5-6v14l-4-4H8a1 1 0 0 1-1-1v-1h14V8h1a1 1 0 0 1 1 1M8.19 4c-.87 0-1.57.2-2.11.59-.52.41-.78.98-.77 1.77l.01.03h1.93c.01-.3.1-.53.28-.69a1 1 0 0 1 .66-.23c.31 0 .57.1.75.28.18.19.26.45.26.75 0 .32-.07.59-.23.82-.14.23-.35.43-.61.59-.51.34-.86.64-1.05.91C7.11 9.08 7 9.5 7 10h2c0-.31.04-.56.13-.74s.26-.36.51-.52c.45-.24.82-.53 1.11-.93s.44-.81.44-1.31c0-.76-.27-1.37-.81-1.82C9.85 4.23 9.12 4 8.19 4M7 11v2h2v-2zm6 2h2v-2h-2zm0-9v6h2V4z"/></svg>
    
  
  Modding FAQ

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Tools-FAQ/" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 15H6l-4 4V3a1 1 0 0 1 1-1h15a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1m5-6v14l-4-4H8a1 1 0 0 1-1-1v-1h14V8h1a1 1 0 0 1 1 1M8.19 4c-.87 0-1.57.2-2.11.59-.52.41-.78.98-.77 1.77l.01.03h1.93c.01-.3.1-.53.28-.69a1 1 0 0 1 .66-.23c.31 0 .57.1.75.28.18.19.26.45.26.75 0 .32-.07.59-.23.82-.14.23-.35.43-.61.59-.51.34-.86.64-1.05.91C7.11 9.08 7 9.5 7 10h2c0-.31.04-.56.13-.74s.26-.36.51-.52c.45-.24.82-.53 1.11-.93s.44-.81.44-1.31c0-.76-.27-1.37-.81-1.82C9.85 4.23 9.12 4 8.19 4M7 11v2h2v-2zm6 2h2v-2h-2zm0-9v6h2V4z"/></svg>
    
  
  Tools FAQ

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Cobra Tools" class="md-nav__button md-logo" aria-label="Cobra Tools" data-md-component="logo">
      
  <img src="../../../../assets/Cobra_Tools_Logo.png" alt="logo">

    </a>
    Cobra Tools
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/OpenNaja/cobra-tools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    cobra-tools
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Home
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Download/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg>
  
  <span class="md-ellipsis">
    Download
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Updating/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1a6.887 6.887 0 0 0 0 9.8c2.73 2.7 7.15 2.7 9.88 0 1.36-1.35 2.04-2.92 2.04-4.9h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58a8.987 8.987 0 0 1 12.65 0L21 3zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8z"/></svg>
  
  <span class="md-ellipsis">
    Updating
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Disclaimers/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 9H7V7h10m0 6H7v-2h10m-3 6H7v-2h7M12 3a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m7 0h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    Disclaimers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Credits/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 19.2c-2.5 0-4.71-1.28-6-3.2.03-2 4-3.1 6-3.1s5.97 1.1 6 3.1a7.23 7.23 0 0 1-6 3.2M12 5a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3m0-3A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10"/></svg>
  
  <span class="md-ellipsis">
    Credits
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../Development/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 19V7H4v12zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-7 14v-2h5v2zm-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59z"/></svg>
  
  <span class="md-ellipsis">
    Development
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Development/Documentation/Documentation-Guidelines/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12h8v2H8zm2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4zm-2-2h4.1l.9-.9V16H8zm12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
  
  <span class="md-ellipsis">
    Documentation Guidelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Development/Documentation/Documentation-Primer/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12h8v2H8zm2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4zm-2-2h4.1l.9-.9V16H8zm12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
  
  <span class="md-ellipsis">
    Documentation Primer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reverse Engineering
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Reverse Engineering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Development/Reverse-Engineering/OVL-File-Formats/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0 1 14.25 15h-9a.75.75 0 0 1 0-1.5h9a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 10 4.25V1.5H5.75a.25.25 0 0 0-.25.25v2a.75.75 0 0 1-1.5 0Zm-4 6C0 6.784.784 6 1.75 6h1.5C4.216 6 5 6.784 5 7.75v2.5A1.75 1.75 0 0 1 3.25 12h-1.5A1.75 1.75 0 0 1 0 10.25ZM6.75 6h1.5a.75.75 0 0 1 .75.75v3.75h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.75v-3h-.75a.75.75 0 0 1 0-1.5m-5 1.5a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h1.5a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25Zm9.75-5.938V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914z"/></svg>
  
  <span class="md-ellipsis">
    Reverse Engineering an OVL File Format
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 20h7v2H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8.54l-1.5-.82-.5.28V4h-5v8l-2.5-2.25L8 12V4H6zm18-3-5.5-3-5.5 3 5.5 3zm-9 2.09v2L18.5 23l3.5-1.91v-2L18.5 21z"/></svg>
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 20h7v2H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8.54l-1.5-.82-.5.28V4h-5v8l-2.5-2.25L8 12V4H6zm18-3-5.5-3-5.5 3 5.5 3zm-9 2.09v2L18.5 23l3.5-1.91v-2L18.5 21z"/></svg>
  
  <span class="md-ellipsis">
    ACSE
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            ACSE
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2_1" id="__nav_4_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scripting Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            Scripting Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Content-Packs/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h-2V9h-2V7h4m5-4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    Content Packs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 11a2 2 0 0 1-2 2h-2v2h4v2H9v-4a2 2 0 0 1 2-2h2V9H9V7h4a2 2 0 0 1 2 2m4-6H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    Game Databases
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 11a2 2 0 0 1-2 2h-2v2h4v2H9v-4a2 2 0 0 1 2-2h2V9H9V7h4a2 2 0 0 1 2 2m4-6H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    Game Databases
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-the-game-database" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Game Database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#game-database-hot-plug-module-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Game Database Hot-Plug Module Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Game Database Hot-Plug Module Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#game-database-content-merging" class="md-nav__link">
    <span class="md-ellipsis">
      Game Database Content Merging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#game-database-files" class="md-nav__link">
    <span class="md-ellipsis">
      Game Database Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-existing-game-databases" class="md-nav__link">
    <span class="md-ellipsis">
      Modifying Existing Game Databases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-custom-databases" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Custom Databases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding Custom Databases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-fdb-files" class="md-nav__link">
    <span class="md-ellipsis">
      Adding the FDB Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-prepared-statement-collection" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a Prepared Statement Collection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-managers" class="md-nav__link">
    <span class="md-ellipsis">
      Database Managers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database Managers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-database-main-loader" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Database Main Loader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-gamedatabase-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Adding GameDatabase Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-other-content-pack-databases" class="md-nav__link">
    <span class="md-ellipsis">
      Modifying Other Content Pack Databases
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Game-Managers/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 10.5a1.5 1.5 0 0 1-1.5 1.5c.84 0 1.5.67 1.5 1.5V15c0 1.11-.89 2-2 2H9v-2h4v-2h-2v-2h2V9H9V7h4c1.11 0 2 .89 2 2m4-6H5c-1.09 0-2 .9-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    Game Managers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LuaDatabase-Prefabs/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 17h-2v-4H9V7h2v4h2V7h2m4-4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    LuaDatabase and Prefabs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Dev-Lua/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35s5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06M404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8M154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58z"/></svg>
  
  <span class="md-ellipsis">
    dev/Lua
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tweakables-ShellCommands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tweakables and Shell Commands
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Plugin/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 20h7v2H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8.54l-1.5-.82-.5.28V4h-5v8l-2.5-2.25L8 12V4H6zm18-3-5.5-3-5.5 3 5.5 3zm-9 2.09v2L18.5 23l3.5-1.91v-2L18.5 21z"/></svg>
  
  <span class="md-ellipsis">
    Blender Plugin
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Blender Plugin
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Plugin/Animations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Animations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Plugin/Models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../Textures/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 20h7v2H6c-1.11 0-2-.89-2-2V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8.54l-1.5-.82-.5.28V4h-5v8l-2.5-2.25L8 12V4H6zm18-3-5.5-3-5.5 3 5.5 3zm-9 2.09v2L18.5 23l3.5-1.91v-2L18.5 21z"/></svg>
  
  <span class="md-ellipsis">
    Textures
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Textures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Textures/Authoring%20Icons/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authoring Icons
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Supported-Formats/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914z"/></svg>
  
  <span class="md-ellipsis">
    Supported Formats
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../Modding-FAQ/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 15H6l-4 4V3a1 1 0 0 1 1-1h15a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1m5-6v14l-4-4H8a1 1 0 0 1-1-1v-1h14V8h1a1 1 0 0 1 1 1M8.19 4c-.87 0-1.57.2-2.11.59-.52.41-.78.98-.77 1.77l.01.03h1.93c.01-.3.1-.53.28-.69a1 1 0 0 1 .66-.23c.31 0 .57.1.75.28.18.19.26.45.26.75 0 .32-.07.59-.23.82-.14.23-.35.43-.61.59-.51.34-.86.64-1.05.91C7.11 9.08 7 9.5 7 10h2c0-.31.04-.56.13-.74s.26-.36.51-.52c.45-.24.82-.53 1.11-.93s.44-.81.44-1.31c0-.76-.27-1.37-.81-1.82C9.85 4.23 9.12 4 8.19 4M7 11v2h2v-2zm6 2h2v-2h-2zm0-9v6h2V4z"/></svg>
  
  <span class="md-ellipsis">
    Modding FAQ
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Modding FAQ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Modding-FAQ/Crash-Troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Crash Troubleshooting for Modders
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Modding-FAQ/Installed-Mods-Troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installed Mods Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../Tools-FAQ/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 15H6l-4 4V3a1 1 0 0 1 1-1h15a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1m5-6v14l-4-4H8a1 1 0 0 1-1-1v-1h14V8h1a1 1 0 0 1 1 1M8.19 4c-.87 0-1.57.2-2.11.59-.52.41-.78.98-.77 1.77l.01.03h1.93c.01-.3.1-.53.28-.69a1 1 0 0 1 .66-.23c.31 0 .57.1.75.28.18.19.26.45.26.75 0 .32-.07.59-.23.82-.14.23-.35.43-.61.59-.51.34-.86.64-1.05.91C7.11 9.08 7 9.5 7 10h2c0-.31.04-.56.13-.74s.26-.36.51-.52c.45-.24.82-.53 1.11-.93s.44-.81.44-1.31c0-.76-.27-1.37-.81-1.82C9.85 4.23 9.12 4 8.19 4M7 11v2h2v-2zm6 2h2v-2h-2zm0-9v6h2V4z"/></svg>
  
  <span class="md-ellipsis">
    Tools FAQ
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tools FAQ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/OpenNaja/cobra-tools/edit/master/docs/Guides/ACSE/Scripting-Guide/Game-Databases.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/OpenNaja/cobra-tools/raw/master/docs/Guides/ACSE/Scripting-Guide/Game-Databases.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>Game Databases</h1>

<p>Lua scripting for Cobra Engine is not complicated; the problem is the context in which you run your Lua script. Some of these contexts (e.g. park managers) require the injection of your Lua script through <a href="https://github.com/OpenNaja/ACSE">ACSE</a>; however, there are other contexts where the game can be scripted without the need for ACSE. One of these contexts which are initialized early and available throughout the game is the Game Database.</p>
<p>The Cobra Engine uses a modular approach for its internal runtime database. Most of the game configuration is done and made available through the Game Database. Whether it is the cost of a lion in Planet Zoo or the list of available dinosaurs in Jurassic World Evolution, the Game Database holds this information. There is a set of database modules pre-defined in the game's main script (gamescript), but the database driver can load additional modules during the initialization process of every Content Pack.</p>
<h2 id="using-the-game-database">Using the Game Database<a class="headerlink" href="#using-the-game-database" title="Permanent link">&para;</a></h2>
<p>There are different ways to interact with the database and perform <a href="https://en.wikipedia.org/wiki/CRUD">CRUD</a> operations on it while the game is running, but this will happen outside of the context of the main database and will be covered later.</p>
<p>For now, to access the Game Database through the exposed game API, all you need to do is require the corresponding module and call its functions; however, the content of the database depends on the game title. For example, we can get an <code>Island</code> definition from the database in Jurassic World Evolution 2 with this code:</p>
<p><div class="highlight"><pre><span></span><code><span class="kd">local</span><span class="w"> </span><span class="nv">GameDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Database.GameDatabase&quot;</span><span class="p">)</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">tIslandData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">GameDatabase</span><span class="p">.</span><span class="nf">GetIslandTable</span><span class="p">(</span><span class="s1">&#39;Challenge_01_Taiga&#39;</span><span class="p">)</span>
</code></pre></div>
The Game Database will return the <code>Island</code> information that we can now modify at our own will. There are more <code>Island</code> related functions in Jurassic World Evolution 2 available, like <code>AddIsland</code>, <code>RemoveIsland</code>, <code>RemoveAllIslands</code>, <code>SaveIsland</code>, and <code>LoadIsland</code>. These functions have been added to the Game Database by the <code>Island</code> Database Manager, which has been loaded as part of a Content Pack.</p>
<p>At this point, we still do not have a Lua context to run our code in.</p>
<p>To address this, we continue expanding our <strong>ExampleContentPack</strong> project from Part 1, adding database support. This step is optional and only required if we want to have our custom data loaded into the game database. In addition to having our custom Lua code added to the database, our Lua code will be executed inside the game database context. This will be our first Lua execution point for our Content Pack.</p>
<h2 id="game-database-hot-plug-module-implementation">Game Database Hot-Plug Module Implementation<a class="headerlink" href="#game-database-hot-plug-module-implementation" title="Permanent link">&para;</a></h2>
<p>The Game Database allows for hot-plugin definition in two different initialization steps, one being the content merging process and the other being the database operation.</p>
<h3 id="game-database-content-merging">Game Database Content Merging<a class="headerlink" href="#game-database-content-merging" title="Permanent link">&para;</a></h3>
<p>We will create a custom database module in our Content Pack to interact with the game during the database initialization process. The game will try to merge all the database information from all Content Packs. For that, the game will look for any file inside the Init or Main OVL files called 'Databases.{contentpackname}.lua" and load it.</p>
<p>Start with creating the following file <code>ExampleContentPack\Init\Databases.ExampleContentPack.lua</code> with the following content:
<div class="highlight"><pre><span></span><code><span class="c1">-- ExampleContentPack Database script</span>
<span class="c1">-- This script will hook into the GameDatabase content merging process</span>

<span class="c1">-- This little block is required for non-compiled Lua scripts. It re-defines some globals for use within the script</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">global</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">_G</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">api</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">debug</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">api</span><span class="p">.</span><span class="py">debug</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">table</span>
<span class="kd">local</span><span class="w"> </span><span class="nb">require</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">string</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">ExampleContentPackDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">module</span><span class="p">(...)</span>

<span class="kd">local</span><span class="w"> </span><span class="nv">tConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">-- Tell the main Game Database controller to load the following FDB files</span>
<span class="w">    </span><span class="nv">tLoad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="c1">-- Tell the game to create and/or merge the in-Game Databases </span>
<span class="w">    </span><span class="nv">tCreateAndMerge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{},</span>
<span class="p">}</span>

<span class="nv">ExampleContentPackDatabase</span><span class="p">.</span><span class="py">GetDatabaseConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nv">tConfig</span>
<span class="kr">end</span>
</code></pre></div></p>
<p>This Lua script will be executed and the function GetDatabaseConfig called once during the Game Database merging process. It is still too early to have access to most of the game features, as the game data is still being loaded; however, this gives you the scaffolding to modify some of the game information without replacing the original files. </p>
<h3 id="game-database-files">Game Database Files<a class="headerlink" href="#game-database-files" title="Permanent link">&para;</a></h3>
<p>The main Game Database Manager in Cobra Engine supports different methods to hold its data. While internally it creates a volatile SQLite database, some of the information it handles is saved as tables by their content providers. One of these examples is the <code>Island</code> Database Manager of Jurassic World Evolution 1 and 2. The <code>Island</code> data is not stored in any file and created ad-hoc in memory from a Lua table. Some other modules like the Buildings provider in the same title, stores all the building-related information in a SQLite database. These Game Databases have the extension <code>.fdb</code> and can be edited with any SQLite browser. Our recommendation is <a href="https://sqlitestudio.pl/">SQLiteStudio</a>.</p>
<h3 id="modifying-existing-game-databases">Modifying Existing Game Databases<a class="headerlink" href="#modifying-existing-game-databases" title="Permanent link">&para;</a></h3>
<p>This point is where the game is merging the content, and therefore it is asking to all Content Packs to provide them with any 'data' that needs to be added to the database. We can use this point in the game execution to modify or add existing data to the game, however; the data being process depends on the game title. </p>
<p>For a quick test we can extract the FDB from its OVL, edit and modify the attributes we want, inject back in the OVL file using cobra-tools and save it back to its original file, but this change will stop working in the next update of the game when the files are replaced with their newer versions. </p>
<p>Ideally we want our content to be merged to the original content. The overall process is to select which game FDB file(s) you want to modify, make a copy of it into your Content Pack folder, modify to whatever values you want and instruct how to load and merge this database file in our Databases.ExampleContentPackDatabase.Lua</p>
<p>In the case of Jurassic World Evolution 2, the game defines the price for the different buildings in a database from its main Content Pack called: <code>Content0\Main\C0Buildings.fdb</code>. Extract this file and make a copy in our <code>ExampleContentPack\Main\</code>, and rename the file to <code>TestBuildings.fdb</code></p>
<p>We now want to modify one of the entries in this database. Open the database, expand the table list and navigate to the table called 'Power'. This table defines how much power a building uses or produces. Lets change the power used by the Hatchery:
- Browse the data of the table 'Power'.
- Find the line that has PWR_Generator in the Building column. 
- Edit the PowerOutput in that row to 300.
- Commit and save the changes in the database.</p>
<p>Now we need to instruct the game to load this file and merge its contents with the existing database. Back to your Databases.ExampleContentPack.lua it is time to add information to the tConfig table. Replace the previous tConfig Table with this one and save the lua file.</p>
<div class="highlight"><pre><span></span><code><span class="kd">local</span><span class="w"> </span><span class="nv">tConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">-- Tell the main Game Database controller to load the following FDB files</span>
<span class="w">    </span><span class="c1">-- where sSymbol is the FDB name, and the key is the name we will use</span>
<span class="w">    </span><span class="c1">-- to reference this FDB name. We are loading TestBuildings.fdb as &#39;TestBuildingsFile&#39;.</span>
<span class="w">    </span><span class="c1">-- You can load different tables at this point</span>
<span class="w">    </span><span class="nv">tLoad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nv">TestBuildingsFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nv">sSymbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;TestBuildings&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>

<span class="w">    </span><span class="c1">-- Additionally, we need to tell the game to create the in-game runtime database</span>
<span class="w">    </span><span class="c1">-- and merge its content. To interact with the database we need to specify the</span>
<span class="w">    </span><span class="c1">-- tables to look from and the prepared</span>
<span class="w">    </span><span class="c1">-- statements to use (the PSCollection name):</span>
<span class="w">    </span><span class="c1">-- If the runtime database already exists, the current data will be</span>
<span class="w">    </span><span class="c1">-- merged with the existing one based on the table/colum rules defined</span>
<span class="w">    </span><span class="c1">-- in the database.</span>
<span class="w">    </span><span class="nv">tCreateAndMerge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">-- Define the new entry here. This Key will give the name to the table in the Game Database.</span>
<span class="w">        </span><span class="c1">-- We are modifying the original database called &#39;Buildings&#39; by the game created in content0.</span>
<span class="w">        </span><span class="c1">-- The in-Game Databases can be found in the content0\Init\Databases.content0.lua file.</span>
<span class="w">        </span><span class="nv">Buildings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">-- Specify our merging content, we loaded as TestBuildingsFile before. You can merge</span>
<span class="w">            </span><span class="c1">-- several databases here as long as they have the same structure. For now we just merge</span>
<span class="w">            </span><span class="c1">-- our single file.</span>
<span class="w">            </span><span class="nv">tChildrenToMerge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;TestBuildingsFile&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Now we need to pack both the <code>Init</code> folder into Init.ovl and the <code>Main</code> folder into Main.ovl again and launch the game, the power generated by the backup generator has changed to the value of your choice.</p>
<p>It is important to remove every entry in the new database that has not been modified and is not required, this will reduce merging errors.</p>
<p>While this method works with FDB files, other databases do not store its data in a file, instead they are stored in a Lua table provided by the database script responsible for it. </p>
<h3 id="adding-custom-databases">Adding Custom Databases<a class="headerlink" href="#adding-custom-databases" title="Permanent link">&para;</a></h3>
<p>When writing a Content Pack at some point you might want to introduce your own database files too. The game engine supports that using a different scheme. This time we have to tell the Game Database that our database file needs to be added to the game and it will be the main content provider where other Content Packs can merge their information to.</p>
<h4 id="adding-the-fdb-files">Adding the FDB Files<a class="headerlink" href="#adding-the-fdb-files" title="Permanent link">&para;</a></h4>
<p>To add a custom database file to our ExampleContentPack mod, we first need to create the database. It needs to be a SQLite3 database and saved with the .fdb extension in the Main folder and we will name it <code>ExampleContent\Main\TestCustomData.fdb</code>. </p>
<p>Open the database FDB file and for this example we will create a table called 'TestTable1' With three columns:
- Column name: "ID", type integer, Primary Key, Unique, Not Null
- Column name: "Name", type string
- Column name: "Value", type string</p>
<p>This SQL sentence will create the table for you:
<div class="highlight"><pre><span></span><code>CREATE TABLE TestTable1 (
    Id    INTEGER UNIQUE
                  NOT NULL
                  PRIMARY KEY,
    Name  STRING,
    Value STRING
);
</code></pre></div></p>
<p>We want to have our table populated with some values, so lets go ahead an create a few entries, using IDs starting from 1001 (later we will query the table for these values). In this example I'll add the following entries:
|  ID  | Name  |  Value |
|------|-------|--------|
| 1001 | Name1 | Value1 |
| 1002 | Name2 | Value2 |</p>
<p>Note: these values and Ids are not relevant, they are just to showcase the use of a custom database.</p>
<p>Back to our <code>ExampleContentPack\Init\Databases.ExampleContentPack.lua</code> file, it is time to introduce the new FDB file in the game. Edit the lua file and modify the tConfig table to include the following:</p>
<div class="highlight"><pre><span></span><code><span class="kd">local</span><span class="w"> </span><span class="nv">tConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">-- Tell the main Game Database controller to load the following FDB files</span>
<span class="w">    </span><span class="c1">-- where sSymbol is the FDB name, and the key is the name we will use</span>
<span class="w">    </span><span class="c1">-- to reference this FDB name. We are loading TestBuildings.fdb as &#39;TestBuildingsFile&#39;.</span>
<span class="w">    </span><span class="c1">-- Additionally, we are loading our custom FDB file as well</span>
<span class="w">    </span><span class="nv">tLoad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nv">TestBuildingsFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nv">sSymbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;TestBuildings&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nv">TestCustomDataFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nv">sSymbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;TestCustomData&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>

<span class="w">    </span><span class="c1">-- Additionally, we need to tell the game to create the in-game runtime database</span>
<span class="w">    </span><span class="c1">-- and merge its content. To interact with the database we need to specify the</span>
<span class="w">    </span><span class="c1">-- tables to look from and the prepared</span>
<span class="w">    </span><span class="c1">-- statements to use (the PSCollection name):</span>
<span class="w">    </span><span class="c1">-- If the runtime database already exists, the current data will be</span>
<span class="w">    </span><span class="c1">-- merged with the existing one based on the table/colum rules defined</span>
<span class="w">    </span><span class="c1">-- in the database.</span>
<span class="w">    </span><span class="nv">tCreateAndMerge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">-- Define the new entry here. This Key will give the name to the table in the Game Database.</span>
<span class="w">        </span><span class="c1">-- We are modifying the original database called &#39;Buildings&#39; by the game created in content0.</span>
<span class="w">        </span><span class="c1">-- The in-Game Databases can be found in the content0\Init\Databases.content0.lua file.</span>
<span class="w">        </span><span class="nv">Buildings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">-- Specify our merging content, we loaded as TestBuildingsFile before. You can merge</span>
<span class="w">            </span><span class="c1">-- several databases here as long as they have the same structure. For now we just merge</span>
<span class="w">            </span><span class="c1">-- our single file.</span>
<span class="w">            </span><span class="nv">tChildrenToMerge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s2">&quot;TestBuildingsFile&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>

<span class="w">        </span><span class="c1">-- Define the new entry here. This Key will give the name to the table in the Game Database.</span>
<span class="w">        </span><span class="c1">-- This time are creating a new database instead of modifying an existing one, so the entry</span>
<span class="w">        </span><span class="c1">-- will look a bit different.</span>
<span class="w">        </span><span class="c1">-- ExampleTestData is the name of table the game will create for us.</span>
<span class="w">        </span><span class="nv">ExampleTestData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">-- Specify Which one of the database files is to be considered the first one</span>
<span class="w">            </span><span class="c1">-- One to which other databases can merge to. We associated our custom FDB file </span>
<span class="w">            </span><span class="c1">-- to the key: &#39;TestCustomDataFile&#39;</span>
<span class="w">            </span><span class="nv">FirstChild</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;TestCustomDataFile&quot;</span>
<span class="w">            </span><span class="c1">-- Specify one or more Prepared Statement Collections to operate with</span>
<span class="w">            </span><span class="c1">-- this database. For the game to access the data in the FDB file, it needs a set of </span>
<span class="w">            </span><span class="c1">-- Prepared Statements. This list of statements will be associated to the table</span>
<span class="w">            </span><span class="c1">-- internally by the Game Database</span>
<span class="w">            </span><span class="nv">tCollections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;ExampleContentPackPSList&quot;</span><span class="p">},</span><span class="w">            </span>
<span class="w">            </span><span class="c1">-- Additionally, we could just specify specific Prepared Statements to be assigned </span>
<span class="w">            </span><span class="c1">-- to this database adding their names to the statements table.</span>
<span class="w">            </span><span class="c1">-- tStatements = { &quot;PreparedStatementName&quot;}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>With this new config table in our database merging code, the game will load an FDB, assign it a table and associate the Prepared Statements with the database. But before we can use this new database, we need to create the Prepared Statement Collection.</p>
<h4 id="adding-a-prepared-statement-collection">Adding a Prepared Statement Collection<a class="headerlink" href="#adding-a-prepared-statement-collection" title="Permanent link">&para;</a></h4>
<p>Prepared Statements are predefined SQL queries to interact with a database. It can support any number of arguments and operate with many different tables. The only difference to raw SQL queries is that they have been predefined, they have type constrains in their arguments and are less prone to fail because they are not build randomly. They are static and can't be modified. </p>
<p>During this example we have added a database with a table called 'TestTable1', with columns 'Id', 'name' and 'value'. We need to create a collection of Prepared Statements based on the interactions we expect to have with this database. For this example we will have:
- A SQL Query to load all TestTable1 ID different values. It does not need arguments.
- A SQL Query to find an ID based on the Name. It will need one argument of type String.
- A SQL Query to find a Value based on an ID. It will need one argument of type Int.
- A SQL Query to update a value based on an ID. It will need two arguments, Int for the ID and string for the new value.</p>
<p>Cobra-tools treats PSCollections as an XML file, and therefore they are easy to craft manually with any editor. Based on the previous list of SQL queries, we will create the <code>ExampleContentPack\Init\ExampleContentPackPSList.pscollection</code> file and edit with a text editor. Add the following content to it:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;PscollectionRoot</span><span class="w"> </span><span class="na">game=</span><span class="s">&quot;Games.JURASSIC_WORLD_EVOLUTION_2&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;prepared_statements</span><span class="w"> </span><span class="na">pool_type=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;preparedstatement&gt;</span>
<span class="w">            </span><span class="nt">&lt;args</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;statement_name&gt;</span>GetAllIdFromTestTable1<span class="nt">&lt;/statement_name&gt;</span>
<span class="w">            </span><span class="nt">&lt;sql_query&gt;</span>SELECT<span class="w"> </span>id<span class="w"> </span>FROM<span class="w"> </span>TestTable1;<span class="nt">&lt;/sql_query&gt;</span>
<span class="w">        </span><span class="nt">&lt;/preparedstatement&gt;</span>
<span class="w">        </span><span class="nt">&lt;preparedstatement&gt;</span>
<span class="w">            </span><span class="nt">&lt;args</span><span class="w"> </span><span class="na">pool_type=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">arg_type=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">arg_index=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/args&gt;</span>
<span class="w">            </span><span class="nt">&lt;statement_name&gt;</span>GetTestTable1IdFromName<span class="nt">&lt;/statement_name&gt;</span>
<span class="w">            </span><span class="nt">&lt;sql_query&gt;</span>SELECT<span class="w"> </span>id<span class="w"> </span>from<span class="w"> </span>TestTable1<span class="w"> </span>WHERE<span class="w"> </span>name=?1;<span class="nt">&lt;/sql_query&gt;</span>
<span class="w">        </span><span class="nt">&lt;/preparedstatement&gt;</span>
<span class="w">        </span><span class="nt">&lt;preparedstatement&gt;</span>
<span class="w">            </span><span class="nt">&lt;args</span><span class="w"> </span><span class="na">pool_type=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">arg_type=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">arg_index=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/args&gt;</span>
<span class="w">            </span><span class="nt">&lt;statement_name&gt;</span>GetTestTable1ValueFromId<span class="nt">&lt;/statement_name&gt;</span>
<span class="w">            </span><span class="nt">&lt;sql_query&gt;</span>SELECT<span class="w"> </span>value<span class="w"> </span>from<span class="w"> </span>TestTable1<span class="w"> </span>WHERE<span class="w"> </span>id=?1;<span class="nt">&lt;/sql_query&gt;</span>
<span class="w">        </span><span class="nt">&lt;/preparedstatement&gt;</span>
<span class="w">        </span><span class="nt">&lt;preparedstatement&gt;</span>
<span class="w">            </span><span class="nt">&lt;args</span><span class="w"> </span><span class="na">pool_type=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">arg_type=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">arg_index=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">arg_type=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">arg_index=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/args&gt;</span>
<span class="w">            </span><span class="nt">&lt;statement_name&gt;</span>SetTestTable1ValueForId<span class="nt">&lt;/statement_name&gt;</span>
<span class="w">            </span><span class="nt">&lt;sql_query&gt;</span>UPDATE<span class="w"> </span>TestTable1<span class="w"> </span>SET<span class="w"> </span>value=?2<span class="w"> </span>WHERE<span class="w"> </span>id=?1;<span class="nt">&lt;/sql_query&gt;</span>
<span class="w">        </span><span class="nt">&lt;/preparedstatement&gt;</span>
<span class="nt">&lt;/PscollectionRoot&gt;</span>
</code></pre></div>
<blockquote>
<p><code>arg_type</code> 0 indicates an integer value<br />
<code>arg_type</code> 2 indicates a float value<br />
<code>arg_type</code> 3 indicates a string value.<br />
<code>arg_index</code> is the order; <code>arg_index="1"</code> belongs to the Prepared Statement parameter ?1, and so on.  </p>
</blockquote>
<p>We could add more SQL Queries to the PSCollection as we need. Some in-game databases have dozens of statements in their Prepared Statements collection, but for now as an example these will be enough.</p>
<p>At this point we can re-pack our Init.ovl and Main.ovl files. Our Content Pack will load and modify the existing Buildings database, and add a custom FDB database to the game. All this happens during the Game Database bootstrap/initialization process. However, we are still unable to make use of our custom FDB data. Our Lua injection is happening too early in the database merging process and at this point probably not all the game tables have been populated with their final data.</p>
<h2 id="database-managers">Database Managers<a class="headerlink" href="#database-managers" title="Permanent link">&para;</a></h2>
<p>To provide the game with support for the different data, Content Packs can inject custom Database Managers into the main game. Each one of these managers will be responsible for their data, whether it is in a FDB file or a Lua table, or every other method available. The main game script will define a set of 'hardcoded' Database Managers it is expecting, however; additional Database Managers can be provided from a Content Pack. In this example we have added a custom FDB file to the game, now it is time to provide the game with access to this information through a custom Database Manager. </p>
<h3 id="creating-a-database-main-loader">Creating a Database Main Loader<a class="headerlink" href="#creating-a-database-main-loader" title="Permanent link">&para;</a></h3>
<p>After the early initialization content merging process, the Game Database will later look for Content Pack Lua database controllers through its modular system. Each Content Pack can define one or more Database Managers but initially it will look for a default one. It is time we go back to our Main content folder and create the <code>ExampleContentPack\Main\Database.ExampleContentPackLuaDatabase.lua</code> file, with the following content:
<div class="highlight"><pre><span></span><code><span class="kd">local</span><span class="w"> </span><span class="nv">global</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">_G</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">table</span>
<span class="kd">local</span><span class="w"> </span><span class="nb">require</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">ExampleContentPackLuaDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">module</span><span class="p">(...)</span>

<span class="c1">-- AddContentToCall is the hot-plug mechanism used by the Game Database to help Content Packs</span>
<span class="c1">-- attach their own Database Managers to the game.</span>
<span class="nv">ExampleContentPackLuaDatabase</span><span class="p">.</span><span class="py">AddContentToCall</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">_tContentToCall</span><span class="p">)</span>
<span class="w">    </span><span class="c1">-- We tell the Database Manager to load our custom Database Manager by its Lua name</span>
<span class="w">    </span><span class="c1">-- You can add as many as you want, ideally separating each manager for each content type you add</span>
<span class="w">    </span><span class="nb">table.insert</span><span class="p">(</span><span class="nv">_tContentToCall</span><span class="p">,</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Database.ExampleContentDatabaseManager&quot;</span><span class="p">))</span>
<span class="kr">end</span>
</code></pre></div></p>
<p>With this file, the Game Database now Knows it needs to look for a file called: Database.ExampleContentDatabaseManager, so go ahead and create the <code>ExampleContentPack\Main\Database.ExampleContentDatabaseManager.lua</code> file, with the following content:
<div class="highlight"><pre><span></span><code><span class="c1">-- This file is responsible of managing the data inside the TestCustomData.fdb and providing it to the game</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">global</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">_G</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">api</span>
<span class="kd">local</span><span class="w"> </span><span class="nb">pairs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">pairs</span>
<span class="kd">local</span><span class="w"> </span><span class="nb">ipairs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">ipairs</span>
<span class="kd">local</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">type</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">table</span>
<span class="kd">local</span><span class="w"> </span><span class="nb">tostring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">tostring</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">GameDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Database.GameDatabase&quot;</span><span class="p">)</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">ExampleContentDatabaseManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">module</span><span class="p">(...)</span>

<span class="c1">--</span>
<span class="c1">-- Initialization functions. These functions are called during the initialization process only</span>
<span class="c1">--</span>

<span class="c1">-- This method will be called when our manager gets initialized, early in the game launch after</span>
<span class="c1">-- all data has been merged for all the Content Packs. This method allows our manager to know</span>
<span class="c1">-- the database is getting initialized.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">Init</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>

<span class="kr">end</span>

<span class="c1">-- This table contains the list of functions our module wants to add to the Game Database.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">tDatabaseFunctions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">-- This method will be called when our manager gets initialized to inject custom functions </span>
<span class="c1">-- in the Game Database. These functions will be available for the rest of the game Lua modules.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">AddDatabaseFunctions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">_tDatabaseFunctions</span><span class="p">)</span>
<span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">sMethod</span><span class="p">,</span><span class="nv">fnMethod</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">tDatabaseFunctions</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
<span class="w">        </span><span class="nv">_tDatabaseFunctions</span><span class="p">[</span><span class="nv">sMethod</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">fnMethod</span>
<span class="w">    </span><span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- This method will be called after our manager gets initialized, all Database and Player methods have </span>
<span class="c1">-- been added to the main Game Databases.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">Setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>

<span class="kr">end</span>

<span class="c1">--</span>
<span class="c1">-- Database active functions. These functions are optional and can be called while our Database Manager is active.</span>
<span class="c1">--</span>
<span class="c1">-- Nothing included yet.</span>


<span class="c1">--</span>
<span class="c1">-- De-initialization functions. These functions are called during the shutdown or restart processes only</span>
<span class="c1">--</span>

<span class="c1">-- This method will be called when the Game Database is shutting down for re-initialization. It is a soft Re-Init</span>
<span class="c1">-- of the database. We don&#39;t need to close or free resources if we don&#39;t want, but remember we have them open when</span>
<span class="c1">-- the Game Database calls our :Init() function again.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">ShutdownForReInit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>

<span class="kr">end</span>

<span class="c1">-- This method will be called when the Game Database is shutting down and we need to close any </span>
<span class="c1">-- or free any resource we have open. The module will be unloaded after.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">Shutdown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>

<span class="kr">end</span>
</code></pre></div></p>
<p>The file above is a good template for a Database Manager. Database Managers can have more hooks used by the game, but for our current purpose we will limit the template to what we need. This file will be loaded by the Database Manager and the different methods will get called in the following order:</p>
<ol>
<li><code>Setup()</code></li>
<li><code>AddDatabaseFunctions()</code></li>
<li><code>Init()</code></li>
</ol>
<h3 id="adding-gamedatabase-functions">Adding GameDatabase Functions<a class="headerlink" href="#adding-gamedatabase-functions" title="Permanent link">&para;</a></h3>
<p>It is time to add our custom database functions to the game. We created SQL queries above to:</p>
<ol>
<li>Get all TestTable1 IDs</li>
<li>Look up a TestTable1 ID based on a name</li>
<li>Find a value based on a TestTable1 ID</li>
<li>Update an entry value for a TestTable1 ID</li>
</ol>
<p>We will create four functions to provide this functionality through the Game Database.</p>
<p>Start with populating the <code>ExampleContentDatabaseManager.tDatabaseFunctions</code> table in the <code>ExampleContentPack\Main\Database.ExampleContentDatabaseManager.lua</code> file with the following content:
<div class="highlight"><pre><span></span><code><span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">tDatabaseFunctions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">-- This function will return all the Ids inside TestTable1 of TestCustomData.fdb</span>
<span class="w">    </span><span class="nv">GetAllTestDataIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="nf">_GetAllTestDataIds</span><span class="p">()</span>
<span class="w">    </span><span class="kr">end</span><span class="p">,</span>
<span class="w">    </span><span class="c1">-- This function will return the Id for a name inside TestTable1 of TestCustomData.fdb</span>
<span class="w">    </span><span class="nv">GetTestDataIdFromName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">_sName</span><span class="p">)</span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="nf">_GetTestDataIdFromName</span><span class="p">(</span><span class="nv">_sName</span><span class="p">)</span>
<span class="w">    </span><span class="kr">end</span><span class="p">,</span>
<span class="w">    </span><span class="c1">-- This function will return the value for an Id inside TestTable1 of TestCustomData.fdb</span>
<span class="w">    </span><span class="nv">GetTestDataValueFromId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">_nId</span><span class="p">)</span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="nf">_GetTestDataValueFromId</span><span class="p">(</span><span class="nv">_nId</span><span class="p">)</span>
<span class="w">    </span><span class="kr">end</span><span class="p">,</span>
<span class="w">    </span><span class="c1">-- This function will set the value for an Id inside TestTable1 of TestCustomData.fdb</span>
<span class="w">    </span><span class="nv">SetTestDataValueFromId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">_nId</span><span class="p">,</span><span class="w"> </span><span class="nv">_sValue</span><span class="p">)</span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="nf">_SetTestDataValueFromId</span><span class="p">(</span><span class="nv">_nId</span><span class="p">,</span><span class="w"> </span><span class="nv">_sValue</span><span class="p">)</span>
<span class="w">    </span><span class="kr">end</span>
<span class="p">}</span>
</code></pre></div>
Each one of these GameDatabase functions calls another function (defined below) to perform each custom database query through the Prepared Statements we added before. </p>
<p>The functions called by the above GameDatabase functions will be defined in the following code:</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- The following code utilizes the Game Database Lua component to perform SQL queries on the Game Database.</span>
<span class="c1">-- Read each one to understand how to use the Prepared Statements in-game interface when interacting with a database.</span>
<span class="c1">--</span>
<span class="c1">-- Custom Database API</span>
<span class="c1">--</span>

<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="nf">_GetAllTestDataIds</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span>
<span class="w">    </span><span class="nf">local</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="py">database</span>

<span class="w">    </span><span class="c1">-- We called our database &#39;ExampleTestData&#39; in the Databases.ExampleContentPack.Lua file</span>
<span class="w">    </span><span class="c1">-- We created a Prepared Statement called &#39;GetAllIdFromTestTable1&#39;</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetPreparedStatementInstance</span><span class="p">(</span><span class="s2">&quot;ExampleTestData&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GetAllIdFromTestTable1&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindComplete</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">Step</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetAllResults</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="kr">end</span>

<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nv">result</span>
<span class="kr">end</span>

<span class="c1">-- This function will search the database for rows with the name = _sName and return</span>
<span class="c1">-- the first match. _sName has to be a string.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">_GetTestDataIdFromName</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">_sName</span><span class="p">)</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="py">database</span>

<span class="w">    </span><span class="c1">-- We called our database &#39;ExampleTestData&#39; in the Databases.ExampleContentPack.Lua file</span>
<span class="w">    </span><span class="c1">-- We created a Prepared Statement called &#39;GetTestTable1IdFromName&#39;</span>
<span class="w">     </span><span class="kd">local</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetPreparedStatementInstance</span><span class="p">(</span><span class="s2">&quot;ExampleTestData&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GetTestTable1IdFromName&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="kr">if</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindParameter</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">_sName</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindComplete</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">Step</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">tRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetAllResults</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">        </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tRows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="kc">nil</span>
<span class="w">    </span><span class="kr">end</span>

<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nv">result</span>
<span class="kr">end</span>

<span class="c1">-- This function will search the database for rows with the Id = _sId and return</span>
<span class="c1">-- the first match. _sId has to be a number.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">_GetTestDataValueFromId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">_nId</span><span class="p">)</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="py">database</span>

<span class="w">    </span><span class="c1">-- We called our database &#39;ExampleTestData&#39; in the Databases.ExampleContentPack.Lua file</span>
<span class="w">    </span><span class="c1">-- We created a Prepared Statement called &#39;GetTestTable1ValueFromId&#39;</span>
<span class="w">     </span><span class="kd">local</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetPreparedStatementInstance</span><span class="p">(</span><span class="s2">&quot;ExampleTestData&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GetTestTable1ValueFromId&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="kr">if</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindParameter</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">_sId</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindComplete</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">Step</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">tRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetAllResults</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">        </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tRows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="kc">nil</span>
<span class="w">    </span><span class="kr">end</span>

<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nv">result</span>
<span class="kr">end</span>

<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">_SetTestDataValueFromId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">_nId</span><span class="p">,</span><span class="w"> </span><span class="nv">_sValue</span><span class="p">)</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="py">database</span>

<span class="w">    </span><span class="c1">-- Before we try to change the database we need to enable writing mode to it.</span>
<span class="w">    </span><span class="c1">-- By default all databases are Read-Only after they are being loaded and merged.</span>
<span class="w">    </span><span class="nv">database</span><span class="p">.</span><span class="nf">SetReadOnly</span><span class="p">(</span><span class="s2">&quot;ExampleTestData&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>

<span class="w">    </span><span class="c1">-- We called our database &#39;ExampleTestData&#39; in the Databases.ExampleContentPack.Lua file</span>
<span class="w">    </span><span class="c1">-- We created a Prepared Statement called &#39;SetTestTable1ValueForId&#39;</span>
<span class="w">     </span><span class="kd">local</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetPreparedStatementInstance</span><span class="p">(</span><span class="s2">&quot;ExampleTestData&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;SetTestTable1ValueForId&quot;</span><span class="p">)</span>
<span class="w">     </span><span class="kr">if</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindParameter</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">_sId</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindParameter</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nv">_sName</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindComplete</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">Step</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">tRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetAllResults</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">        </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tRows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="kc">nil</span>
<span class="w">    </span><span class="kr">end</span>

<span class="w">    </span><span class="c1">-- Before returning, lock the database again.</span>
<span class="w">    </span><span class="nv">database</span><span class="p">.</span><span class="nf">SetReadOnly</span><span class="p">(</span><span class="s2">&quot;ExampleTestData&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>

<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nv">result</span>
<span class="kr">end</span>
</code></pre></div>
<p>With this finished, re-pack the Init.ovl and Main.ovl files and try again. We have modified the Game Database API, with newly created functions provided by our own custom Database Manager module.</p>
<p>Once our module has been initialized, our API methods will be added to the main Game Database, and any module can use them with the following code snippet:
<div class="highlight"><pre><span></span><code><span class="kd">local</span><span class="w"> </span><span class="nv">GameDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Database.GameDatabase&quot;</span><span class="p">)</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">tIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">GameDatabase</span><span class="p">.</span><span class="nf">GetAllTestDataIds</span><span class="p">()</span>
<span class="kd">local</span><span class="w"> </span><span class="nv">tId</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">GameDatabase</span><span class="p">.</span><span class="nf">GetTestDataIdFromName</span><span class="p">(</span><span class="s2">&quot;Name1&quot;</span><span class="p">)</span>
</code></pre></div></p>
<h2 id="modifying-other-content-pack-databases">Modifying Other Content Pack Databases<a class="headerlink" href="#modifying-other-content-pack-databases" title="Permanent link">&para;</a></h2>
<p>We have seen before how to merge our custom content data into another Content Pack database. However due to the merging process, another Content Pack can overwrite our changes if it is loaded after our Content Pack. With the use of Prepared Statements it is possible to have access to other databases after the content merging process has been completed. </p>
<p>Initially we modified the Buildings module increasing the power produced by the backup generator. We can do it again, but this time without needing any extra FDB file.</p>
<p>First we need a custom Prepared Statement to modify the appropriate table. So we start by creating a new Prepared Statement Collection called <code>ExampleContentPack\Init\ExampleBuildingsPSList.pscollection</code> file and editing with a text editor. Add the following content to it:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;PscollectionRoot</span><span class="w"> </span><span class="na">count=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">game=</span><span class="s">&quot;Games.JURASSIC_WORLD_EVOLUTION_2&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;preparedstatement</span><span class="w"> </span><span class="na">arg_count=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;args</span><span class="w"> </span><span class="na">pool_type=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">arg_type=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">arg_index=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">arg_type=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">arg_index=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/args&gt;</span>
<span class="w">        </span><span class="nt">&lt;statement_name&gt;</span>SetPowerOutputForBuildingName<span class="nt">&lt;/statement_name&gt;</span>
<span class="w">        </span><span class="nt">&lt;sql_query&gt;</span>UPDATE<span class="w"> </span>Power<span class="w"> </span>SET<span class="w"> </span>PowerOutput=?2<span class="w"> </span>WHERE<span class="w"> </span>Building=?1;<span class="nt">&lt;/sql_query&gt;</span>
<span class="w">    </span><span class="nt">&lt;/preparedstatement&gt;</span>
<span class="nt">&lt;/PscollectionRoot&gt;</span>
</code></pre></div>
<p>Now, back to our <code>ExampleContentPack\Main\Database.ExampleContentDatabaseManager.lua</code>, we will modify our <code>Setup()</code> to update the Building's power after the merging process has completed. It should look like this:</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- This method will be called after our manager gets initialized, all Database and Player methods have </span>
<span class="c1">-- been added to the main Game Databases.</span>
<span class="nv">ExampleContentDatabaseManager</span><span class="p">.</span><span class="py">Setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">    </span><span class="c1">-- Get access to the Game Database interface</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">global</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="py">database</span>

<span class="w">    </span><span class="c1">-- Before we try to change the database we need to enable writing mode to it.</span>
<span class="w">    </span><span class="c1">-- By default all databases are Read-Only after they are being loaded and merged.</span>
<span class="w">    </span><span class="nv">database</span><span class="p">.</span><span class="nf">SetReadOnly</span><span class="p">(</span><span class="s2">&quot;Buildings&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>

<span class="w">    </span><span class="c1">-- We need to bind our new Prepared Statement Collection to the Buildings database before</span>
<span class="w">    </span><span class="c1">-- we can use any of its statements.</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">bSuccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindPreparedStatementCollection</span><span class="p">(</span><span class="s2">&quot;Buildings&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ExampleBuildingsPSList&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">bSuccess</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">end</span>

<span class="w">    </span><span class="c1">-- We created a Prepared Statement called &#39;SetTestTable1ValueForId&#39;</span>
<span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetPreparedStatementInstance</span><span class="p">(</span><span class="s2">&quot;Buildings&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;SetPowerOutputForBuildingName&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">cPSInstance</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindParameter</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;PWR_Generator&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">-- first argument, string</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindParameter</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">)</span><span class="w">             </span><span class="c1">-- second argument, number</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">BindComplete</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">Step</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">)</span>
<span class="w">        </span><span class="nv">database</span><span class="p">.</span><span class="nf">GetAllResults</span><span class="p">(</span><span class="nv">cPSInstance</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="kr">end</span>

<span class="w">    </span><span class="c1">-- Before returning, lock the database again</span>
<span class="w">    </span><span class="nv">database</span><span class="p">.</span><span class="nf">SetReadOnly</span><span class="p">(</span><span class="s2">&quot;Buildings&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="kr">end</span>
</code></pre></div>
<p>Now re-pack both the Init.ovl and the Main.ovl files again, and the Backup Generator will always produce 123 units regardless of the value in any of the Building databases loaded during the merging process. The same Prepared Statement can be used to modify other building power outputs; just run the query several times with different values. Consider creating a function in the main database controller to clean up and centralize your code.</p>
<p>We haven't finished with the Game Databases yet, but the next topic covers a completely different area of database controllers and therefore needs to be split from this tutorial.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">March 19, 2024</span>
  </span>

    
    
    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="Contributors">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/hexabits" class="md-author" title="@hexabits">
          
          <img src="../../../../assets/external/avatars.githubusercontent.com/u/170077.fe356448.png" alt="hexabits">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../Content-Packs/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Content Packs">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Content Packs
              </div>
            </div>
          </a>
        
        
          
          <a href="../Game-Managers/" class="md-footer__link md-footer__link--next" aria-label="Next: Game Managers">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Game Managers
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["toc.integrate", "search.suggest", "navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.footer", "content.tabs.link", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.select", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  <script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>